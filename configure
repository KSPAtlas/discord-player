#!/bin/sh

set -e

# Defaults
PREFIX="/usr/local"

for i in "$@"; do
	case $i in
		--prefix=*)
			PREFIX="${i#*=}"
			;;
		--help | -h)
cat <<EOF
discord-player configuration program.

Available options:

    --prefix=PATH      Specifies the path where discord-player will be
                       installed to.
                       (default: /usr/local)

    --help             Shows this help.

EOF
			exit 0
			;;
		*)
			printf "Unknown option: $i\n"
			exit 1
			;;
	esac
done

git clone https://github.com/mintsuki/generic-webplayer.git

cp discord-player.icon generic-webplayer/player.icon
cp discord-player.desktop generic-webplayer/player.desktop
cd generic-webplayer
./configure \
        --prefix="$PREFIX" \
        --webapp-url="https://discordapp.com/channels/@me" \
        --player-name="discord-player" \
        --player-nice-name="Discord Player"

printf "Prefix: $PREFIX\n"
